# Page Descriptions - ระบบเลือกตั้งออนไลน์ (Prototype)

---

## P-01: หน้าหลัก — Public Dashboard

**ไฟล์:** `index.html`
**Use Case:** UC-11 ดูคะแนนการเลือกตั้ง
**ผู้ใช้งาน:** ผู้ใช้ทั่วไป (General User), ผู้มีสิทธิเลือกตั้ง, กกต กลาง

### คำอธิบาย

หน้าแรกของระบบที่ผู้ใช้ทุกคนสามารถเข้าถึงได้โดยไม่ต้องเข้าสู่ระบบ แสดง Dashboard ผลคะแนนการเลือกตั้งแบบ Real-time ประกอบด้วย:

- **แบนเนอร์สถานะ** — ชื่อการเลือกตั้ง, สถานะ (เปิดรับคะแนน / ปิดหีบ / ผลเป็นทางการ), ช่วงเวลา
- **การ์ดสรุป** — จำนวนคะแนนรวม, จำนวนเขต, จำนวนผู้สมัคร, จำนวนพรรค
- **ตัวกรองเขต** — Dropdown เลือกดูผลเฉพาะเขต หรือดูภาพรวมทุกเขต
- **กราฟแท่งคะแนนตามพรรค** — เรียงลำดับจากมากไปน้อย พร้อมเปอร์เซ็นต์
- **กราฟแท่งคะแนนตามเขต** — แสดงผลผู้สมัครในแต่ละเขต เรียงตามคะแนน
- **เมนูนำทาง** — ลิงก์ไปหน้าลงคะแนน (voter.html) และหน้า กกต. (admin.html)

### ข้อมูลที่ใช้

| ข้อมูล | ฟิลด์ที่แสดง | การใช้งาน |
|--------|-------------|-----------|
| election | name, status, startDate, endDate | แบนเนอร์สถานะการเลือกตั้ง |
| parties | id, name | คะแนนรวมตามพรรค, สีแท่งกราฟ |
| constituencies | id, name, province | ตัวกรองเขต, หัวข้อผลเขต |
| candidates | id, name, number, partyId, constituencyId | แสดงรายชื่อผู้สมัครในแต่ละเขต |
| votes | candidateId, constituencyId | นับคะแนนรวมและจำแนกตามเขต |

---

## P-02: ขั้นตอนลงคะแนน — Voter Flow

**ไฟล์:** `voter.html`
**Use Case:** UC-07 ยืนยันตัวตนผ่าน Google, UC-09 ลงคะแนนเลือกตั้ง
**ผู้ใช้งาน:** ผู้มีสิทธิเลือกตั้ง (Voter)

### คำอธิบาย

หน้าสำหรับผู้มีสิทธิเลือกตั้ง แบ่งเป็น 4 ขั้นตอน (Step Indicator) ดังนี้:

#### P-02-1: ยืนยันตัวตน (Step 1 — Google Login)
- Dropdown เลือกผู้ใช้จำลอง (Mock Google OAuth)
- ปุ่ม "Sign in with Google (Mock)"
- ตรวจสอบว่ามีอยู่ในรายชื่อผู้มีสิทธิ์หรือไม่

#### P-02-2: ตรวจสอบสิทธิ์ (Step 2 — Status Check)
- แสดงข้อมูลผู้มีสิทธิ์ (ชื่อ, อีเมล, เขตเลือกตั้ง)
- ตรวจสอบ 3 เงื่อนไข:
  - **ยังไม่ลง & ระบบเปิด** → แสดงปุ่ม "เข้าสู่คูหาออนไลน์"
  - **ลงคะแนนแล้ว** → แจ้งว่าลงแล้ว ไม่สามารถลงซ้ำ
  - **ระบบปิด/ยังไม่เปิด** → แจ้งว่าระบบปิด

#### P-02-3: คูหาเลือกตั้งออนไลน์ (Step 3 — Ballot Interface)
- แสดงรายชื่อผู้สมัครในเขตของผู้ใช้ เรียงตามหมายเลข
- แต่ละ Ballot Card แสดง: หมายเลข, ชื่อผู้สมัคร, ชื่อพรรค
- เลือกได้ 1 คน → ปุ่ม "ยืนยันการลงคะแนน" จะ active
- กดยืนยัน → เปิด Modal ยืนยันซ้ำอีกครั้ง

#### P-02-4: ลงคะแนนสำเร็จ (Step 4 — Success)
- แสดงเครื่องหมายถูก พร้อมข้อความ "ลงคะแนนเสร็จสิ้น"
- แสดง Receipt: เขตเลือกตั้ง, เวลา (ไม่แสดงว่าเลือกใคร — Anonymous)
- ปุ่มกลับหน้าดูผลคะแนน

### ข้อมูลที่ใช้

| ข้อมูล | ฟิลด์ที่แสดง | การใช้งาน |
|--------|-------------|-----------|
| voters | id, email, name, constituencyId, hasVoted | ยืนยันตัวตน, ตรวจสอบสิทธิ์, ตรวจสอบว่าลงคะแนนแล้วหรือยัง |
| election | status | ตรวจสอบว่าระบบเปิดรับคะแนนอยู่หรือไม่ |
| constituencies | id, name | แสดงชื่อเขตของผู้ใช้ |
| candidates | id, name, number, partyId, constituencyId | แสดง Ballot Card ผู้สมัครในเขต |
| parties | id, name | แสดงชื่อพรรคใน Ballot Card |
| votes | *(เขียนเพิ่ม)* candidateId, constituencyId, timestamp | บันทึกคะแนนใหม่เมื่อกดยืนยัน |

---

## P-03: แผงควบคุม กกต. — EC Admin Control Panel

**ไฟล์:** `admin.html`
**Use Case:** UC-01 ~ UC-06, UC-08, UC-10
**ผู้ใช้งาน:** กกต กลาง (Central EC)

### คำอธิบาย

หน้าสำหรับ กกต. กลาง ต้องเข้าสู่ระบบก่อนใช้งาน (Mock Login: admin / 1234) ประกอบด้วย Sidebar เมนูเลือกหัวข้อ และ Content Area ด้านขวา:

#### P-03-0: หน้าเข้าสู่ระบบ (Admin Login)
- ฟอร์ม Username / Password
- เมื่อ Login สำเร็จ → แสดง Admin Panel

#### P-03-1: จัดการพรรคการเมือง (UC-01)
- ฟอร์มเพิ่มพรรค: ชื่อพรรค, นโยบายหลัก
- ตารางแสดงรายชื่อพรรคทั้งหมด พร้อมปุ่มลบ

#### P-03-2: จัดการเขตเลือกตั้ง (UC-02)
- ฟอร์มเพิ่มเขต: ชื่อเขต, จังหวัด, จำนวนผู้มีสิทธิ์
- ตารางแสดงรายชื่อเขตทั้งหมด พร้อมปุ่มลบ

#### P-03-3: ลงทะเบียนผู้มีสิทธิ์เลือกตั้ง (UC-04)
- ฟอร์มเพิ่มผู้มีสิทธิ์: อีเมล (Google Account), ชื่อ-นามสกุล, เขตเลือกตั้ง
- ตารางแสดงรายชื่อผู้มีสิทธิ์ พร้อมสถานะ (ลงคะแนนแล้ว / ยังไม่ลง)

#### P-03-4: ลงทะเบียนผู้สมัคร (UC-05)
- ฟอร์มเพิ่มผู้สมัคร: ชื่อ-นามสกุล, สังกัดพรรค (Dropdown), เขตเลือกตั้ง (Dropdown)
- ผู้สมัครใหม่มีสถานะ "รอสุ่มหมายเลข"
- ตารางแสดงรายชื่อผู้สมัคร: ชื่อ, พรรค, เขต, หมายเลข, สถานะ

#### P-03-5: สุ่มหมายเลขผู้สมัคร (UC-06)
- Dropdown เลือกเขต (หรือทุกเขต)
- ปุ่ม "สุ่มหมายเลขผู้สมัคร"
- ระบบใช้ Fisher-Yates shuffle สุ่มหมายเลขไม่ซ้ำในแต่ละเขต
- แสดงผลลัพธ์การสุ่ม และเปลี่ยนสถานะผู้สมัครเป็น "ยืนยันแล้ว"

#### P-03-6: กำหนดเวลา / เปิด-ปิดระบบ (UC-03, UC-08)
- **UC-03:** ฟอร์มตั้งค่า ชื่อการเลือกตั้ง, วันเวลาเริ่มต้น, วันเวลาสิ้นสุด
- **UC-08:** แสดงสถานะปัจจุบัน + ปุ่ม เปิด/ปิดระบบเลือกตั้ง
- บันทึก Log การเปิด/ปิดระบบ

#### P-03-7: ยืนยันผลการเลือกตั้ง (UC-10)
- แสดงตารางสรุปผลคะแนนทุกเขต (เรียงตามอันดับ ไฮไลต์อันดับ 1)
- ข้อความเตือนว่าเมื่อยืนยันแล้วจะล็อกข้อมูล
- ปุ่ม "ยืนยันผลการเลือกตั้ง (Official)" → เปลี่ยนสถานะเป็น finalized

### ข้อมูลที่ใช้

| ข้อมูล | ฟิลด์ที่ใช้ | การใช้งานในหน้า |
|--------|------------|----------------|
| parties | id, name, policy | P-03-1: ตารางพรรค, Dropdown เลือกพรรคใน P-03-4 |
| constituencies | id, name, province, voterCount | P-03-2: ตารางเขต, Dropdown เลือกเขตใน P-03-3, P-03-4, P-03-5 |
| voters | id, email, name, constituencyId, hasVoted | P-03-3: ตารางผู้มีสิทธิ์ |
| candidates | id, name, partyId, constituencyId, number, status | P-03-4: ตารางผู้สมัคร, P-03-5: สุ่มหมายเลข, P-03-7: สรุปผล |
| election | id, name, startDate, endDate, status | P-03-6: ตั้งค่าเวลา/เปิดปิดระบบ, P-03-7: ยืนยันผล |
| votes | candidateId, constituencyId | P-03-7: นับคะแนนสรุปผล |

---

## สรุปข้อมูลทั้งหมดที่ใช้ในระบบ (Data Dictionary)

ข้อมูลจำลองทั้งหมดอยู่ในไฟล์ `data.js` (และ `data/*.txt` เป็น reference ต้นฉบับ)

### 1. parties — พรรคการเมือง (5 รายการ)

| ฟิลด์ | ชนิด | คำอธิบาย | ใช้ในหน้า |
|--------|------|----------|----------|
| id | number | รหัสพรรค (PK) | P-01, P-02, P-03 |
| name | string | ชื่อพรรค | P-01, P-02, P-03 |
| logo | string | ชื่อไฟล์โลโก้ | - (สำรองไว้) |
| policy | string | นโยบายหลัก | P-03-1 |

### 2. constituencies — เขตเลือกตั้ง (5 รายการ)

| ฟิลด์ | ชนิด | คำอธิบาย | ใช้ในหน้า |
|--------|------|----------|----------|
| id | number | รหัสเขต (PK) | P-01, P-02, P-03 |
| name | string | ชื่อเขต | P-01, P-02, P-03 |
| province | string | จังหวัด | P-01, P-03-2 |
| voterCount | number | จำนวนผู้มีสิทธิ์ | P-03-2 |

### 3. candidates — ผู้สมัคร (15 รายการ, 3 คน/เขต)

| ฟิลด์ | ชนิด | คำอธิบาย | ใช้ในหน้า |
|--------|------|----------|----------|
| id | number | รหัสผู้สมัคร (PK) | P-01, P-02, P-03 |
| name | string | ชื่อ-นามสกุล | P-01, P-02, P-03 |
| partyId | number | รหัสพรรค (FK → parties.id) | P-01, P-02, P-03 |
| constituencyId | number | รหัสเขต (FK → constituencies.id) | P-01, P-02, P-03 |
| number | number | หมายเลขผู้สมัคร (สุ่มจาก UC-06) | P-01, P-02, P-03 |
| photo | string | ชื่อไฟล์รูปภาพ | - (สำรองไว้) |
| status | string | สถานะ: "pending" / "confirmed" | P-03-4, P-03-5 |

### 4. voters — ผู้มีสิทธิเลือกตั้ง (10 รายการ, 2 คน/เขต)

| ฟิลด์ | ชนิด | คำอธิบาย | ใช้ในหน้า |
|--------|------|----------|----------|
| id | number | รหัสผู้มีสิทธิ์ (PK) | P-02, P-03 |
| email | string | อีเมล Google Account | P-02-1, P-03-3 |
| name | string | ชื่อ-นามสกุล | P-02-1, P-03-3 |
| constituencyId | number | รหัสเขต (FK → constituencies.id) | P-02, P-03-3 |
| hasVoted | boolean | ลงคะแนนแล้วหรือยัง | P-02-2, P-03-3 |

### 5. election — ข้อมูลการเลือกตั้ง (1 รายการ)

| ฟิลด์ | ชนิด | คำอธิบาย | ใช้ในหน้า |
|--------|------|----------|----------|
| id | number | รหัสการเลือกตั้ง (PK) | P-03 |
| name | string | ชื่อการเลือกตั้ง | P-01, P-03-6 |
| startDate | string (ISO) | วันเวลาเริ่ม | P-01, P-03-6 |
| endDate | string (ISO) | วันเวลาสิ้นสุด | P-01, P-03-6 |
| status | string | สถานะ: "pending" / "open" / "closed" / "finalized" | P-01, P-02, P-03 |

### 6. votes — คะแนนเสียง (29 รายการ, Anonymous)

| ฟิลด์ | ชนิด | คำอธิบาย | ใช้ในหน้า |
|--------|------|----------|----------|
| id | number | รหัสคะแนน (PK) | - |
| candidateId | number | รหัสผู้สมัครที่ได้คะแนน (FK → candidates.id) | P-01, P-03-7 |
| constituencyId | number | รหัสเขต (FK → constituencies.id) | P-01, P-03-7 |
| timestamp | string (ISO) | เวลาที่ลงคะแนน | - (สำรองไว้) |

### ความสัมพันธ์ระหว่างข้อมูล (Relationships)

```
parties (1) ──────< candidates (N)     ผ่าน partyId
constituencies (1) ──────< candidates (N)     ผ่าน constituencyId
constituencies (1) ──────< voters (N)         ผ่าน constituencyId
candidates (1) ──────< votes (N)              ผ่าน candidateId
constituencies (1) ──────< votes (N)          ผ่าน constituencyId
```
